import org.junit.jupiter.api.Test;
import tasks.FibonacciFinder;

import java.math.BigInteger;

import static java.lang.Integer.MIN_VALUE;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.fail;

class FibonacciFinderTest {

  @Test
  void tests() {
    //zero and first getFibonacci number, special case, cause they don't obey the rule
    test("0", 0);
    test("1", 1);
    test("1", 2);

    //from 3 to 50
    test("2", 3);
    test("3", 4);
    test("5", 5);
    test("8", 6);
    test("13", 7);
    test("21", 8);
    test("34", 9);
    test("55", 10);
    test("89", 11);
    test("144", 12);
    test("233", 13);
    test("377", 14);
    test("610", 15);
    test("987", 16);
    test("1597", 17);
    test("2584", 18);
    test("4181", 19);
    test("6765", 20);
    test("10946", 21);
    test("17711", 22);
    test("28657", 23);
    test("46368", 24);
    test("75025", 25);
    test("121393", 26);
    test("196418", 27);
    test("317811", 28);
    test("514229", 29);
    test("832040", 30);
    test("1346269", 31);
    test("2178309", 32);
    test("3524578", 33);
    test("5702887", 34);
    test("9227465", 35);
    test("14930352", 36);
    test("24157817", 37);
    test("39088169", 38);
    test("63245986", 39);
    test("102334155", 40);
    test("165580141", 41);
    test("267914296", 42);
    test("701408733", 44);
    test("1134903170", 45);
    test("1836311903", 46);
    test("2971215073", 47);
    test("4807526976", 48);
    test("7778742049", 49);
    test("12586269025", 50);

    //middle values
    test("354224848179261915075", 100);
    test("348147399115490473298491045414894562475320947656181150098909190608449577072992416624176576404665376671883958803044029437264675531681752487564893783189344220686328514", 789);
    test("81259103868406903433182271708151486974501120161991566287986152351695355719830402013458358002966605507204384049804300990706435205006798128599439091385859694928888798708904854202035233959459916743505692168497927659987228112074041770186904492257266361998183292420258253177792052859915191653792311956852920939730220566776867420838953362216384670663119019148708099008290957405812140989978168163993297429434412006176865985375101680131980307626072833844330245609379552401819990875276722567970280957248553689291125092328093864998561484439399226670953565488150250488394454624407607244294098853034810704075712983889493525853690793250240096901823346051868827184845994752465502451180854660036648498140133653039972100189599036557177203846699833083643059640530587679146056707038947894078185316718625181896051730945223384772067156121399366057926191361350446186798012658071364300171971094060340491256483354788447141148368489738852565157359505284455388672785471197307484739215559031857201880071538966262966825716210547515158121143566731183283420066252793558439173220149622193507969023286196733566799823051948591698667765441568928397754909677338009358982586549719621554186680326322377229492081278331783497640916208351260015542971463505885129100525415556358003554356242601808609202084548948807560087251866724892305399148209239124200694190235866333444731275493770577810590009294358677371402008291132660978608995511627100437019355301493046284014310284140741522082572675816302232641755732255294418002613657799947447472657254047529927053501970097815011580177197013744105441978270008140850335705220560543735466587164358543092359888299833615658036584944843230098039212499061996247769294104050561481401574995534681654187651129195239696183121294408387105556031026680047378367179249265172956677475187314951342599086139232049732648748814794854179677823336861950027720060283920447208752331769644299927730122588753783670648943631459710277285974733737196232576640436123685773470916794471582610997692854914400393031292055214321773453670134907642551299117408093580020612601278124473381986165709281597997989559155237803017708805123658399527565004661200373114669524159724767629960437039512350045333857909320838983639695913841466921679839263211714237678086454251150010482922619738609021570372639523425116064389007801037549344405144095993935417844148817117451447257537883793971722752984410625688108624416506806823284650824290937732440283301659519795279958834995403263039397167756435855668625526044101363591146246598732618756583101350086660682496048138341427044042050468599090656374756023006813216135995708724631235809361416710306518655004376490112416818519812651597342618793249725969488539188953288701503636801793571459342272151264705575815147247043717737724603148003776646404630622148875954873472623440994406778840127868569826049555168807850352532962230157400766539055859098298574881379106695157160061356020390082726358992109518794134278523696728917247752916526111368011306777045589422210752822942223211703073046757975544753288989573209761128522852220205442639749039827164513073668344162842832874330535321483131657230207011209598397122595960420368218719630844541241077545677410791580442142303200389541228854980579655771137290853000518157014757880333230099524467237839364114600372410648014574566425304580731111485086820185266923760250979875521987743037616108339612099284493378106327666779879365316044154279119375673659364936082475285331171563369675239994588361149483643002825806670271714527363239517413024578631364127821051778719089465203586723852247497052270073880259876225223203533197073553040021096982748279658464345301294470951765687977694642165240344362664179309612909358212369239928865979501280801217915467173390976786155806894108242062782213230441804611421565089741167532012662143209598163800071857711983267335001569148947518541328330935605916607429767325849937827656042138452020366212395229475843559391333481597944875738804464598590652542799363094632768051173851094092637391799430926457089285326278496090372370964332014579191789919530545900166237922769387968889495374176230812643554541383409829025119951714266766195646036158917617652970099588411517261022095622892898049678664037231270143474462102810492015914861712545828111741151059965547330539396024309598265112757162735380251391877682824276386480020157721471327031199149989240652607975173159215223292696768646242671080869964794433844220867817127128859693365305149859587090140655070409652467600049308958425349240674819526242444429045186085891015176267660520438348677543975819370265934156606556458220092320882970492302959244468966719838242669002651679582454508401880305178658210741362292419658051920054518862555614638701247311991110981387327516393827516841298292930840755565499725059066039405607477240637466540476565062954922339614620056514248920352354873120580702218320230445096893014158614452112660640937718195303132618677688887442998862047262079981300291886660866522932772446292154480373096098930775917246216845018743773518322751465449993930078386750318544774761316731535758977633442242767337008325263647817962656155195699260034449855349000570329662916063934960192054652493219463999663732692692280333697615239756456701122996453884727244054800368372501985587366708194798037794214526643441692718723450260562394019109809821196306967263866546956177838630863658484971023785303811898758558665620207660602196996211179993933703441668248031612388842942378070616312259787529700796645922744889908119768145301632658571563918517452141225374046950634483025606619583741649254631687930425381598629686038606688961365060424021106725410874740249825190563513829756995726840047690964906258964329846314481350303753396892796580814217967610329347721544821604176524258782585684402609384591678307938469148412580988718450371471877596972921636521990085758155648907266892884352563956902147171127162425240016778753729904821350314667303944383191868473276093447939582769252860402188586673733121372014437764659526777387973881419360598457487122786063940404502178076354650716962160865679544788311647951623125670296419550262710411423001824644268847978090239268809174665103538024212284641984014716633361752000718304239688240753780067255443648969355567644384826952293706522980416519400097218030863040330503988036545342599031913687911465776565124301470107840810857847636357304803882201487532211193990962989061532061785491333368998771963425061069286897961442473775301051393657756503661385032108374433357216503692339678534504005424835634484779592935591921164873850039170869602995996052013644718616219616771750480996495629441943430824561394998390280545323748670416516035421712774636947366211136475806422547722282287610011353959358832497915558899117402984440736619011415331070015965589842339426965376525911483691553221087746037713984426562729950858622993555554302577246422185634684027220499258175710987982666288085856370062827295780129528937138312698121859876593134655750225382269840711656728476364519238700987110562202020494921501012320536931097304441813852097570283466954795164490857394253263239400338626956691392877970646779977462498257160285975605514221419350318076062841667232159389266547488387971900795066897522805595320328258123425246676204569090208557387463794876136035332276989116051547320463632336912009860807514489898569767731703672396888494929734284079752686601420963511401791967240833013242918748423365093571224958715082021592505365890877084623070431394088", 35166);

    //max/2
    test("1077773489307297478027903885511948082962510676941157978490230921003274473536465230498488444020476029849319433283274054953307539817330483067414835387175554540519844620087346424938072325821301670190811988251618614959586085409937375106530448744637829968513893256636681633131732045918931898863135599612655615546389764030557151405397922601243227304829000716908863786206755177008322693280878498662740588365375937582745087047441929768088349613112971288592851767548484151032523851465334921528252459084466698411101587182887301894506311341515623798245893600417568995720126596157628990959355731402138029685765390557089535847112683962321195360189733388114238140515264593740927152326504059583750815213732368481593236728447575119467557464554422126542220275696283937536759059155955463878564256896667116761467384803801434909803321471265525245144152549832048734930166056768820668771759919744444935935088639508014800544331468556549936334994139143072089673319542213769664519855004306020366507003052291723041808934238051920953410007158729893603386457670243188709645798965413747164667906577936267866196457775757252015252068493715000460956718593142123341990626215459893933077132059613701637301087675999606255687706667591676091409577877451663668287538782197418996327734228301092476982626873928576490563480059410310767526696258416645787778507414220704441130914493668425195910176918761448464396869983540535428776253464879551756244862159817408126456774225752803753838399845933757396201602416068842272523487140676462153030586204625113611434042433798760578652117922768659247166354431987943463843003939890821453509262965233902059369238673525294206131750551625882357774114071358826125773212222415075574803998022214274948740799210572359084607321757510709230245040535821780299001683552089622478492821696389953101404432463976483368103166182454835144828572325165031466503598458267317211993173365145809936143008326989566407562507349640887192313422925890193544883744743179727153441102714065881520580800020703833148947768887649191217797780979925592987356964202390623983465277804263308821933051679883889295266504139825370287752631917589681462250484938100037614775188338234832218620895846937534869553149128721601417705627313643081288948613138219163025293502371819159964259808237634023944931332062605474612272279529426331164678088155095646499466245557649737684860053738504901734266039739248324716625233531964886694788142734276445419008184313311285634528998213366980652066093433365043971592724637670468056377718948001726470920269147563047690456061135449238592015854761083538522702832146058168406399364954040520312306429657043970818858218160287319473973542885349326873880702527039319014025425047674928003622157175606361221575771548307134889801648417805407682784567024531556241603011884695211901247893641848955660423954234060275086391900543714565307315974261376130677387011843248554909313482884510304468810023601212358542690835193336851063797643620778280627109031980839538821279264429549745862240679506906449939373868213045019493727878607758972681525013807476516567635263938687279182306523896293479421812775275767067080834661210060051449791193755194190272728264690837515587718472613394334005550731610759189196968295860856861127020272643374476594416348575355559350638645878075115101672843266839395295381516632463411691476527413885271733639979859771479701207382441862353688808431127070705443538393969991680729860997643787330361260452079179396215604783758857968160780376962005355105386101336700557030472593829600047682758904638946037995486421545466364591300907318692931557088089086195527051967319521656496879035621255086701042537404765688643583452932585495452656385578238942025984173701721726864251831594213215214887668013508259781248399946219087345016625368706423157916003496183228244221682588630755402774473006338257125053879794762007437829800385369171749592778397346486327639016218711371892595610580707152762581359953265897623888561431188784043844473052571055419223538596910537360352163873550560403153352499121085534012095978028039950967075483974230215432887173636247566623653380866864430165175366352610819322424161233092164312788407197728087032050242455296087274026149289728159928263937106027206247439203247705490211932980442487754584865236725036261503900272923999666373202619794081335574553272262224605020899992558374066410962363234619005279301784791564988962718852591579853514055187317372760225259278385032595533811723576068841003022532869389869512546991201860699250824699401152332702346215697937912339958175599061438259957388503897441647234171231389242764766139658847848865015454296064721728576055594663714912731505480325845556539532978711005142326842122418012383510399669199064364345355046580787890301614832970226041029108284021409508226100740261823493634691446617576464290209169492370331450663677309353028251465593040128357177052250027208271570162475958870983023951038237863317452827462837487831054529685241949550949300270558322882077594617493238778913673986212126487826512788140241476393543650959905044617726398073232737256400441289404756875082095025276877147072002068920905854395547491023074689952655988273754666079554722185768678339179917272311420903110261709672972820429876481918498528587138377701559889210214565715979078971055224258831946819028198708349528931795666673647713585326447378802655871624873692001133245996495979512491665017864224497401050660184945903924035680374218146194711367607013135028960782279158072703882459958944714887511134589371887360227661908272318939690112306974896858833174918479997120488507247345883095561156569291160773363311668417546453646881624620857813573180522067467140711482126062130699939856646824418267252979262452163383734411769930020367599600041783070096647169520710430984530779404242067445367313738799553275024603565157944491051109070665601404439941303780651854209730366323236086243808427807836753957463728590904062733874450560833790907346524980178737076670939139552105977373544906691655391102374992643002914560871898633256709874214502604984198816587332526831300605181816940481120587769275403445248982637481916391408520977719026098018526264301068727580050276809651792651716778187417438257153462699124447249565395132157534098418741235952746319802948605805611456205430193033596579324052274700134754987235581438252140425609628387606110527624718665488453716388222064628242046530124386099066517029486976032231174356597287928422723062460288788493358147105141511843672692519703933079389596250940749519518888098925655135988885701034055608754787209109532669487862345542862395362198334738551193514126583403099071806642221309860067721397686439793997791874899911592790375937100959177170168572551490609213096576987939444911316491133789751810580383022983881022008306091954322409601718365129974393104526918765567278705004743109508234037000236203693788853661375250567622973987365096071922663911213575659407494821583275920055441280699337966774677324078043916349598025118249971177882181830949863376164307813396603520247309182901757641796189701867666644657221232253811686116690912512665593122088467395732882460984227300618730614550665517158822709423183997675859237499300033514984853418833576097219524912054242267258271598490050901153972060253506226574678670622729692574998296809862577467225312694377023108363334414094355190989667655694415467173655735043735739278776509098374178270845535406317005069492078576483478289010993186205307737966664476771098958901153875491182698550325000552001309512085432894883248703104282593044230754234390695272647660220467324355983500460072684315358072710121127285384136760785378783103917958411954976413486928821058759532423899190358084225493001627000353033052088483748334929693388376318136230371670203359196670944887036147063035829298900896143631330096190057914242480691051968711036751346386916513104107408004257705076970455910557858723075595606915444904699652059156003908374517740263850194645488889167688358164311770641761788556479637620858284349112486366297000113369668619480190214121828164968171572735937095527707418079389610746472056852556923698683510801663730896494924358254425350706886201337834869795550747097370804271993324466140488861182220129154162318726927688938969292645509104916790039580176352365955058324426342204300126312549030595760622495862412634991057720122696284840731881205354830446943593964754164663587362164408781943949394826941923066545013268227299230790816701834137738671563394257084274107548430461739011142089895926922025607576486756312206236476000320258221498865747307869066088007593172717058800631067076025694246089138274686567385092261362361877821865883357996812329393028588861531195675558638677535574037205134653019181464741394364508632886321237869144759613705372635240130896237178985645318435761293363137895788100128813998911451017309988278367279140056990486891770644253869480711351967297092824202984812408878880431609348366135722327305774300128365219671994124950218534758476010543101647183465233462602174992570730116613189011695837136196346010376401485952494303531545751807381703538672148888672857626796472162417153381846603529369168061215869106968133569298701863093974377188004962852429839846398786383902904879497682857610688826661622717722626622250277735138061743992139859564690782235927994815436279154422537138563151659778253356822105524886400502765781650721804764164746233916221399341296264918214925606204501374304277857342560329690471180900430114207491819855872579225525208705654669240631463536275526404830226589992544397711562448807298277242831199965076119043609478712852663234822882865193256113124732013775586212528756087102479608712043180116458627079198279777781613711291295095243391731346239583285733632659648015650286988515006468909920659847545510172427616176240651739916939504597982496521591256133212646747851195837416643424292979101420604760095492319857449030727672157337435668631115590379450566286530080575780763060803482800642069793519164220974968065427952408907932659908102378715272523242170091136614684124158724497988910317528686643460105357181934446922109445999414768301104269876906038785417562116181321330670808593206053807020698071823063330468615629232705045196419148031059705628013608175009331914291885808751962605458474604194206257224753676742372629234677631054260685497191783786688197868052125761772640409495112155761882698223668381539682186867629262907557205675103732451647568429444236992124912404874642815806867508067244510645124441922343362518137645828033764612095719936197364556462149210633588703081823042665930493669537680372203970374907819690111266524020297618305364252373553125", 50000);

    //max that i find and max-1
    test("9125179561646446243476363926872354621744500206594487152025778935880328183697770988717073576084217429387309057128101578515542865300904212996359229494661495670454373249529728747279097332646304921120986341943634651169936845704806258283932643433550929737219979562396524176706175963254805785103017369583987206449403140185614168286850950239939729386622238083992756551945664520054740689894138066392897197046347973591593002761631686693892887829846004188444636829791740466759691289615447007750111567255559909569631058488080284990443101593665735725342657899886578683519913458156926545061425333166433029248991417211884793030916342922169019996452194991868990863419631760135637368139284859529175288196619539172068132671772292217725331413960889549706847960541425061134459009646500578835057177342820704645633306139333301420388378662023502843038972371049049213672644263499804253766025751460127421420615011863428513303470758512394212026879753878193492667105678076365736346963248939832854526079573321931653260579466026508649701276291590636736409418814251815117382158308829663959832620934031794509646123092971351904721361538718255915087221783214854044556633062078786780062770938207358044346892914373484626597477008334002305808585115291012573581628193165078260355602055491511077107384393465387107795882455386778197042160628643850788060444604075812714654173979701801568076134096771990193545703639499904411428111161676272949246620706630906385555717595410699392306388036761056265880021097533024399581431751062468658409166120105300437114484333951240579910873168511967484330092698514629641639203096647595569783974270356026921786405757244400651190233021251700927981771269797932889013540038346141935986427679722867495090100802151573298288042224234591622625366377611674604564158285626348805698363191841217763710673730831640534662200667663630472402806408201054898144789126679195857432391538051137640841256796887550988065032118714654708891250308481036674375755052740650117466132006001743717829302046032329289108166799811714105021219966904016425128807789787517342732022646649664044152130124402222371366440708452808522642554582127381911424453307542083632482737136144904462710069551104607127454631284158772328323534410654549000745979770711475287333613818466855677509607049409198649094208213985428335199479634898575853289213749162961930179521091905222269740653386739039052306426948830975671273955019148658830165936184349306505712498347649170195872925675124134965331813106181769565686290691862883726161588327330310524700356286117763791289086187095817801854721415016350839756072281166643358862753186575313117948465569614184234824760279907987461712990594431161346976695037125791480587886494891906348895621687049692528840599733024429704001840443319682372667284733366006725932584541748985273404968242747651406927131053180079237766316880150662891655167005957258260210580330354517787731226333993204558964052758980212717617680799524537290453009426344319789040951306816485624962861586664116589669155087961651123515529943956254958229042171183374183198921310711043099090011838528724342499900936305689350733192103464579991913352240631262211152732464248054134028823106546191705723501530236057450395723084231459946014528404262509789908695955908605522271252998239587043880221995761349396593485502451683013041606600630754346304840265278890670476912043943969963120452323574852020366842313614952180586066309993814795947364903548273483218101527222409450331214764276291698773648443820735589714773521463075945937147139520704698612596452188052727446253637124636874514469183764976489634682324219956492017148193492216719401956197567499930234373540596652381913027543935038152612183211732628093244775425058866029194582957553490642051731339590335583613325275985716597745744651550559027296114039206287359386773872370256341920759932773709746624003538385079782779210779326089643621529386790357126975182039484126667407095115309406418298725522249043199424920116024207179283660166726738906107634724227903037551135608976522249765890979730371009121454031046477475827940627994274654054589879757755845498392725057361544006224789173959004044001395843777048029038100337508600998413937494152227911399677068659128463006040148139079287885608915651659239241617852387934715880249283452090479424841543948574812756399602892386166520026111571363886691166702603547681176742818931972750777800832683555652988980602348563238830518367175128077499603037323822270258852614405793666651506179658562413760432786441533858673539613491961976547379642563984362742994176299293403364493314829786996172591595654712809607387796632906239562874337460737488410341067035618013568568816004249929059484702174266619017890959395773836782224987771627865554339320993901359519712057386348729562852146072547115369524606878915986885576059933939323071877486031149521320809757310798565655280770417922084902505656081371797997016402662206955829601733627590091122796268917453291320952158695469674161985772683082924457126285486837195567947485458040346503030849506208720409493778684780749013042455925783687358127855032392778533146364979458242133520612617705069323165961945535062624731800760720673491657281129175838730143364305320906430868561967449522654034508909064327559891982342008124226247619734832563057431812707878718648193515725350023417569714930049396605595783905264296114434392349327655947560162640438780186016311733645851729880537083903002539621330920578803301952749176059540680320456654844545968465128456719077815559627176376421512428217074462191806093340640279111286865918492743964692971853185232855605438048653553532880091231465441016406773449882275879789916997968447312547042130436113619352980524241263910417900943491215841359436572451517579320606875849305115384003320520381438270204017341053199496211299251724513537294731821533431820196365293298573834128860874125668939810877944629790151267602019381978772018395282068303500744146568274964745522962548311598709356340693360044960110524197655675432989894480288599719627734631028069268626682815311860978036931588968797781223425366838865855648239806666153486934985793088440099901992071757368246815605274929351536310018049379138439637321612098170021469825063433852820654805859752142111046717436139439676010747952245375518028262294640215235593757876765028555841015882961506903776794541339705001207545094164369218487338190513949514731191812862515149254368176344633208534066367271191252476713236973388405663162544311265193843471931318685154733122665697101706424999089978538897832080977006978929730452591618740325862627539713859962448409700278764989294203765927421160353522541704449767389789045768322352458534397092013057155988208112330415810664443111111437414608362817190270660462983172880846836222802814878125204474392987061613317019054763453622920433265233502138612877248991857030301029683547654948457363430349424053320971677871943142608513413257321825449807162922092534690077546532973358195436940589221153453729152314487655452770962874836902560212311523930987843022011914182215650485251530065210680582466951202690536188190713954534727278444755946277541751079910288510895016479230703329290210040970450783117838626373599277425208530673142071680564325253913546604498958375967592351242138956385436664433556075389732516905462125619420065576399504533530291629827606855925677784418454226027297893619079239450499572671227653776791535716829036986412895191203241993253802607489652646061912644777218507259037178382784664869902417952141272260622924693012370037525754620818545204579244121663186704322060782344571455176502085135820425277944007911156037132871131334141255231825687251995923311935680798375764024694031787607781858255778111235683341888309481637306561505580734073836168717644435434659132251651619605167665371186599467475558887901259999876478886843236872599238107819728166870739696102912993010330318174008447262729903553144346374227265430793035793046275586144178085786921439932872433979826983090598655574337315943177550164350687033019409252816585063748375203906773196011270730347854559477123300726450262287298368953779985072461067656682076304616579487477986018149870463216344873556845591677921346404216713123860200270803241266511427814759726668367860923529169838766018903980095945780366287460269330259393175564007010902855620200114189149605511088421151282996645806738723836626225763450409446402669593502530744029297168465960393234533676945503023245637931498402887663922104156695197177873976957481862094841117040681673988115685198128973986210981947598909638366466726236802852297899473256651528347199314786935040424894054383054539497017057734517083424589353831459453665169814983711315001059865393040078961950624750729925602449208861305366207593286279198072153632927887722227937442434805553160820207972511612608880520826934590423845549556128571993030701104444970525403435318452748579345313882175874317501945271897341607937714424413632257262113840993851621954577594788722250261566677859094183950179089102257302562235620714096543750387698267660372831623592407992653328310268320189580447871901032649770859236634582671814765194891076559640794805766728197122627233539239447027830310678496075578990902845583405092166080873488423470510673802173393297429625673162391506784311718718896601705049698822150075372458460408035422864382242263690989280174039149304964644330420550970925191433806194339369962021524877662945051604451776474840551642861079850259795018982276872741580101280788996089403430169760769664843346973338480401622623027940130337334852874803459004653100916646334806443498213982769976903669408108394793397523119485806795870820942244804419093768076187616514465122442467405805583693250254441726493490475339401094082887892735836210223712102883888148464756231025019084302375073260919666585024872231721625738450456097167748333339033096798165971587490836926039367168011862263821629004351666602221711245619738624592842809174087803692296378600093688083497827445000890831491790071494976533626429429014098632185050332597175434504740831061901278968318958812334288348401540147194513001003394000075966471252130855798717062689295958276180886735090762665142019437833073394404910723681144310215384643915342737385869535034000082065138030933936701379847183021938758981258993657925396945550712221061849706122870820740185120382916999049223597874953334960555287505478889210290741382549471348306808060137762091315828738660440980051440078920009114899390041916868963659648612943116949023231787791400995099524632020122384775783513833924528883450861872431432216177467953066893268547225560281749422833018070551298602181152483323592358774857568125983301845709698963265999617492870910446123793542906935556103223083329363540434599835958452825104042251260851420182296775911126141707808500507842909120781640909516803485012332836262863871514397116675030341564626798693840230696720250028509710002819991974298088536067134400704191823735821728686121577529042805322141523689380264751390711052721131899212632497678073276803613763618602318299670506079051249081126415783493892289821080826463723798406590688992866128044827041338990005341678774541492724208489141589897562831946412799392769517268197192431811618952651970993330765466101207944946643958149367208813014589863054949153520618958818406174465868755627501337615341162438288231971486861430770574113368382970254548883236204624484053052989676639826368312961024976199813431688268933648386917074560484914382617362707628437890640874193460237221056404594443567256913176245696788975867659176878791273352105136715536115070425924296787916379795261438221874456445543215095760168649605997823484144236404859536917312403283906292837285866694848913709283908416303708668131300557293797407041223020749236095748032264394718992314575620820301216026361228160672395660450122333355742827773793310991630859058628055378525398617328979403870983606633992231263818689873002780311206322859682474326956278622726193854464040347158256128949672291061610934058067888117023190951165001797304438015627810573254780596829098777201808525372174414768475457658874843546334596691652925585487006972451954921701085335826874704940078878704093613847829232048291617378262730754847023627219153804652084358860003706474845364848903113417633457458425614597668674694533726001695095067611427727598295832856957784345939071989012668678672991976188698656039257735425162208840254914576015911696678220816402883853525065852205779151196553486871320071794149858200009440100695613579043474740351618782109712332391178430945329482800114630971625444963688649579104327623684985412810936567364716346378835959225921098813575219328606583106405135645795886708158849752385653221976688255326467705431185199748771322486637949189193557729590653957296863324252564139746140929803020180312409376506571904639635732020194484945438847508135742353835450461680839021151328089328020136291295591772643828041240765918621495454255741678539175342725159973846414326868788921754753211596276501393367754628132253051844262815744693711126557422933644175273797029439472514498509614740458520704895452863248128920372644529369187325282717332453882103380940794616132415474685898078985109731508731975978296872406880448482139157988128458459251818180947490894136892834777402625890030869354018803936334004277496556430194514465660620964074826922324907710111355164343834752568635006308229044424774239609336826107314761656687273752542879237785049609685313298767697382143847015137013068461597461908634804505165692091960575652349342911400978457126722248871712939068411050635840245890307686619784698991031056643848020487100085986350303257311926417999056600273883773348345062125572338502304611402532951638392218947863341216393033579659235088650597664281820318816317639514429387330268519418690810071067920768195989124046087099841826616102277297153488882127569695834574740564479460309305380400044341298579458161162715590668912910623174650764100012076625192953236572687498486981695804809376476405737943499599882692212838311218411292830505368770377692205111713946026767971145990594950902364618993344045932361805235359552997021441249543769964689597288386712960199673709320770998582375812198251149106555171891679861751428955118325467869735972057144070244726882267420004088350911771223716946000495620673274804319114955944283935813117516635089191819814375435761524869836653805933401951766433221571996860739991564768924521152450037147968654981014365797357327875631611767343285921474448889758426407092027671819677099702164109245061486844316591918060683575902177229374639599420845390553355373544949905636751849637854583561631883023840692858720409214505898783120762598542594767295708211169071934633187287896804383365420881074387407972838333459300438392990282916083435890420835451880902015289338867640999992746544570773494241494290502911305819851048690203506233223902698950332552990284557708935094520828617193886876176858495691277080431052061726959905807360374751878969", 70331);
    test("14764850684189816403580140143363762977190377750284997600081715975272095626237007191933058991712470461789480075339733520643077652900244040642777957199846614952653615549551842821757379649841482454956957335347567317796005172391978162470788509886647353391570150596787247471740604960252169816185679374267324363719369233047906037013933297132149009750631813193927617024277421180936426016744723335128085616188613051298073247681435487069610662088538747806784473095917967888143065159222434747519205444439749997347585066903905757234759688528877449278938692787193544610028515312427043698104371225335376967927550948309172427481928633845854641321462601454498236202194352087853322929403935521154682279490489952555675151146294679626556757911379367136627054507548995995327177472330777557390401300207548311608397841552986498956429508002571169976376084549032971293224465764063513041025477955348484927500537267908644254950503396733770666202844306292349063403055918912071290902510350446549833365593697962031270622167202995060762482620009793051517283720252302094592676749533490381251640551938752173387075527584350991393006046794162706980641780283882450961612082238390871946996171588122965298524172202150167621051235195857484856088355841573731528271211181720909867034253783679850801955266399496630833439703091329473202315111959780974268909196511202826145057164687924445950769435459152865374401952098550016937404217549276081775433053111926089458415202250135602256491706642955979753434210904101253104788846243264827245466962291087947607228510619086477964224302610931136891794587934430008055162460782286071311845506618042325435188007950675877309141639963476647240202508221527147962460284357018962087498645561799272116385807712602812717481276659453535305350952231987516972372953127325142934502038186199875536504580807832008398589557752479478928997380283906561566369975136813952485227291668341427894350969112457746502437290133425333183413246077175440180381126744152782080138876855312061837898009892620319553244308676245120740608300455287970421524564402101550643173525591114344474690140556830604660909036310851325288155418548485123458753459076092291800765631361087417124524639477107474869307579272706511650672224992516630032464658421321016816931682920867967799431858865654409269320174761827086828910001638550254699870676487439826733127057879828455605824665597027120864047746161968684304076983018593831595938427128375598745729523730175710046764683220768551605159036638673023456843495643155467902184176562057318150254733985804644802560580189982409962717851816901445456250576572317119408929871680151512932621583194963048613195354852703852400755117018173178183640596153895407197140552862745373895298517265245678680151290668272322838441788285285853868307219644639152670052736064671278420321991751142707216832303459113268331719783623385870076454220996787949682825787138837998667809305018073019501623448708247816677151246012564492826807854491871755074059597403139119383566289689958539963382956419666634463640619926687095165027910416728916987376836466543735873548855016899944399127620886029631110495679245127182012655217760523147536296007328528544631918165158685449250910957414057683187579644400945847240467861867929695404224701336632218994069626148103299237009365889143459040634265277918366133361138858282579147797772840119498222030695386195665459197223050509455759696295826342659143209455067143574863401456908487833596963668088964913124092536917506224220429967669152601805626147244317463315005098605229086531126116042346412554310218309664450044217103177809717760226715323718779993216687391518708450471026122589602217223387215722705535322540747353688834733003615437473418964649805414525926255091414489443716577102234449733193799537505066797188353420651826496173932868134741489410674294671879310032146420949040717674607736889521203044919816621905558276297907751435839605882505651236445559501987322501230579081365662098711006371342772819820009186930578344733698466524225271255471474248383396353436771863377119232131433947279783985960142814978145133597301941015118262583968939092989235416083570638594225715864839398509524819192976283545626231287255904075281471604018301434401225586643610803763161596852073604190632919339279226843875309432959278486454628806006194077917938002550284371761591927707937935889331899729232032847407886150396074270282639786852608469532100258939760608991149873348069138983259005480153971789355379126585536949510294227945154208476369273849109359121518424900026030349479261809126864938388858742498082135934796083121144531852625147715736575444537242136210000047041315550244062871412930570732198487301070538694116955576968577492739014984467497582020427888590251735879747246995606495993803176797516783532520828190247607695508260047227182931602168576021361222186124931338027649439948936146769129026527059614298243489962823118851520562832219016659006982696905633823613281337997144019262979492720514374542705834489595554908636094238917393745974297758059065608661274549107028039966503342809285093089633526291496996286581335430229785701019954582696485221831697515171677057316665097977091546315737112113453251836036180379786513154747472434227614168931581810457155989225867739517849696564444334335863458360289681497230187628867633220450565122107651669532488823645181854509941400612192418356997112530405181527800567178762024908290007875852999612380094150965307129269485958670176169222513018644294274977689386716140304750433999880303930143245830223168081109066507591835696543261030728260512506860203181110517315987533148664219431158811863687113413415466399985214489751515012175371755346996139500799915324900289598206124234111367218363558466880913510844634091201685229891078668081363951052006557129948361407678941833784333625316414344717805873551833347587534478122875857551199390236559744336407102063405624900230276603126458126725818441367119936352634247151994088979602267376654486619232127124949998381826693703178754224037256162644400976972234815830853131917364629419091137372283506078247024062475794646399022902348071196207866960152846833489817684965514678503579410830923003175898715551857675381226726024830146606739025204857661598213721984619203133493674022502412927719927211848471082263060143017479184491633086868383573254827797086849557986429683797824012269880060528652863600924696691977841321083192032105397843002113530394660511331235135370318431124434265225741907339983620106175036626706666425183940601936066600324165879951772769061665375925234968137020832401889247765977822563115483094582016820888104617048338148856677160826859313680152671118364827693451531693114190157368342731402230967654771845736578370193624123356206718729913689998264541605551100351529111596676613355164643928284724443373612376105148351915691650489553208491077005366155521409313154806052558302460765118866984740857594716747940898474358339404612389427326310322110938332590821532416024247257293579454513821181776529984768544854681982178846390419335162902407866931550759816717475136922433277275235312455419471680905990563218593821033812037495708286901320629916978121942597531975698088115758732615154099837702030672262589027362422877241212014989511942314971403095949376676845147864764743205952372105352133033569849297456649846366775094383319755142935027678011150479724690244286756902024129508069106337974410965919843355132888060568465419120984036095703608896360910649682802449698438615853501593472486864215766056452636798591499935939113759465440190361410822960746812934009724977366287005215523358817609209574091546966008864152755426361804210459398990864657895419637659893567574829341571438336270383620726656733593070442418918179446762925500078404283209356794527660943710073634437930787683037546818800092324540816575071249117801991168802106586297884629770231928632325480691967851962218950612406940273957211673703626860464829461433545303446889953421126972539851691317669760350295043554577103616582483007634200731549621952941234285988954861642434651714370258320212161052433051540785906877931080900926151192975839173027376992151877191243962460135716584223100263637399353667575715725876945618114713415173482588350861424900143053639931158346847907226639641736404392381369791693292949216821604952757885109138184443464117556886249732350359794291373078349716996357913561825817656068839714266157931074422821736476347800106458141517478656444852025488695365381076744340066056691232818903916129235849541922994708595932903850068157677381752375960303740526378496979041130377756191089018897056563236343719315887918065386052994474979842527575144042839942620230538403420357526643379376938418476551651108442475367764857979257989648691380046940023375389641108472723722208633505707323132088250625482503829855071180627663513694011767617927660577721330870126177693332525050892545296976384426468742786427902475729974224420648597812241328636652643792435418115031122679578924962367489400418733789306279211444562124047578490971251466983605157568659374163931454034413655899597733375321144370852532190463544038703145934474443165477259615008721846463243381596571814648662862900675702170236410737149563266339714879305304135896863731953225919262579708913223257401734295473544116597569587717205100526796041783498987124595841122393666932553382956797286780804239436782105311767307520610079520504137417525638943835962421664949279887083280045570585906897513506109415974748536331396538177342478126325898748232336559858374723376431079107724333192892065574663553485103921062414179571134904145357298802586983262507742635020659871652824284256718665024126175892210035014617675341563844277813544767747435298301134637199179932033725534138900958773775338752051578968100863264681072898843888955844975159687529248171741694002873691410692681209285680126058784154844821683193310160145697392199045598446359851397245381336738707055918566959989706154947619480453081462457852069929422361719188382244480009850690766813115261508922175510431485242264050322245085869745697989779744219921549397495312920830848173846519068165250965122579339581785812107355676983747969846375247012396132608436840505995287315342113615033978810551640236158788676365250522083376554359802124063727685523989913049286290896121989921127654184915770733357805725525779956427974110849324062202484551256203622051222480364097865012843778032763859223989916689793079109952427086217700965853851989053307523138288712266194149445549640293904062033458524846241707117749192828099472450777966805548325898649024959986047390988387793013409554510051847028725046471813673569251602016295738153341072569890544828910008477651396649255606269120796339762553303327218862694188993963333586510593799110233537879919292846297704664076927142764198236391627566102265681252881940576794207902291706217990071934424079974363977919689016400029156971328139727089053816180015396778050662056569047966032387398184787606455424588241163124613132581720538760960974730727895577141308192731178275885020278464645113221899140602210271623360853029149742397670766320194688291748343863346042659502837318532765675224553087036591626452117535758720366019021144989350405745271382846887782689899187524981003118564169335134201150334434346437595474209458919749829375020094562881319484750473188647664690321717813421022746655123208272744176368479921185863703320890985533180575534118271177098326124205517769169844107275669306613392201644600965054856481582052526567469201678548553097877072849593106405873261758185980995651833445492681036335154405135473576075291748569669729360865614987457490250361637903728634366983788150497684125691202902167093698592994735182759069373007452948419237928855631125540030481345287901133664054048019045270178460166884971638250096117463012362689109130820380861378492471041379482103106344935928171549062494607809839939789387037552913109598218398157156686930097895317242209940607336723197937061327205980041571594835170481271159947320592305926611690306544606812707161061081103843018769783464534543528710259247853849897760046419871527755980759848400902657617067814170116770597890768638936785524299996075482718940394790650134183711457518062980158132693929510988796968746136266885970292784707162991094629842621375674186461430309662173669118435785095635281085016934268159646656729062849214498904484607494987407714072040185810453065703475362496693828755749553069046989537888435089831769302852138987661631527467591922093577568808375502386289891711978987353737593812602448400362069261288430796666952363092295192805582169477966825404213788137803121344878719299091572020806086892974024437020675558476200951698178548033967433449743399306408155577238625334666450640609355670656836509015841478745513999408306319708227832253870546460259343545957248179956989836402439950847496363371273250422619995170444018219513203713596648726181022355249917762734891578759611103566028204155945198106605899676782979452601430613060055463353492628431543741475244332524802728215126786834039076524950392289887193642079440124746357259023459665721353946867155473425424184546741247305936597558483538331606796510498032093246867109236737152363665651245750800096383550006893512110985609431377128711745319007706826646226757535609138123157241883518531983143293910107405496345306666665344596214127181327004747878964071670995679944193360749150293239414593622023462741377685512771462906920099338320102179354190588373282733789617546841761802737810434577607490154538212306204958049142808702722999691532818851932800719698693947003110568574264357636813645111978053321336341734045057220029820277948295992696770797584561274024624875397940238560109280745333157726775489536000793715030994682815370423750863572545461470136954498973858095332065165518503469414044226038854777802682476294065571371581504166485414728782397769494349686284403598882420671202189280677839368072395251567441354773387311047129934084117842866309805370351117367035984282271777367949463281387835167830876082921942405877214596069172651098283277061629779729543709337615165755727486631830880723207629430830469173052901667662531157170824483708056680526734483987798326801848744821333715435470451544191157353292014591639803324942129354454201510888890661771024657281050490313539354521567052942402502971999497057869292140638285812697201296552233999491403356473178250292744241045474775907263643220271859228109952374433172066542294587066339777153194796743346927507562968699293424290796964749362033812746074895281104942047726434949471299884856334502745443515848514757589995962180450932614011711532333322500172229961195193933746956292601710620002611732995411074357321074045718139740686078329100541026897537518710464363710078692780042905286203509340659000464543091704727870441134964319142596740849438493561583648950275570256220785470366637214468980525302337266086305831753292933255224417238618495297193881934168386727199473512624028740561108701615370379885146303000784", 70332);
  }

  @Test
  void exceptionTests() {
    // from -1 to -50
    testThrow(BigInteger.valueOf(-1));
    testThrow(BigInteger.valueOf(-2));
    testThrow(BigInteger.valueOf(-3));
    testThrow(BigInteger.valueOf(-4));
    testThrow(BigInteger.valueOf(-5));
    testThrow(BigInteger.valueOf(-6));
    testThrow(BigInteger.valueOf(-7));
    testThrow(BigInteger.valueOf(-8));
    testThrow(BigInteger.valueOf(-9));
    testThrow(BigInteger.valueOf(-10));
    testThrow(BigInteger.valueOf(-11));
    testThrow(BigInteger.valueOf(-12));
    testThrow(BigInteger.valueOf(-13));
    testThrow(BigInteger.valueOf(-14));
    testThrow(BigInteger.valueOf(-15));
    testThrow(BigInteger.valueOf(-16));
    testThrow(BigInteger.valueOf(-17));
    testThrow(BigInteger.valueOf(-18));
    testThrow(BigInteger.valueOf(-19));
    testThrow(BigInteger.valueOf(-20));
    testThrow(BigInteger.valueOf(-21));
    testThrow(BigInteger.valueOf(-22));
    testThrow(BigInteger.valueOf(-23));
    testThrow(BigInteger.valueOf(-24));
    testThrow(BigInteger.valueOf(-25));
    testThrow(BigInteger.valueOf(-26));
    testThrow(BigInteger.valueOf(-27));
    testThrow(BigInteger.valueOf(-28));
    testThrow(BigInteger.valueOf(-29));
    testThrow(BigInteger.valueOf(-30));
    testThrow(BigInteger.valueOf(-31));
    testThrow(BigInteger.valueOf(-32));
    testThrow(BigInteger.valueOf(-33));
    testThrow(BigInteger.valueOf(-34));
    testThrow(BigInteger.valueOf(-35));
    testThrow(BigInteger.valueOf(-36));
    testThrow(BigInteger.valueOf(-37));
    testThrow(BigInteger.valueOf(-38));
    testThrow(BigInteger.valueOf(-39));
    testThrow(BigInteger.valueOf(-40));
    testThrow(BigInteger.valueOf(-41));
    testThrow(BigInteger.valueOf(-42));
    testThrow(BigInteger.valueOf(-43));
    testThrow(BigInteger.valueOf(-44));
    testThrow(BigInteger.valueOf(-45));
    testThrow(BigInteger.valueOf(-46));
    testThrow(BigInteger.valueOf(-47));
    testThrow(BigInteger.valueOf(-48));
    testThrow(BigInteger.valueOf(-49));
    testThrow(BigInteger.valueOf(-50));


    testThrow(BigInteger.valueOf(-99999999));

    //border of int
    testThrow(BigInteger.valueOf(MIN_VALUE));
    testThrow(BigInteger.valueOf(MIN_VALUE + 1));
    testThrow(BigInteger.valueOf(MIN_VALUE / 2));
    testThrow(BigInteger.valueOf((MIN_VALUE / 2) + 1));
    testThrow(BigInteger.valueOf((MIN_VALUE / 2) - 1));

    //border of long
    testThrow(BigInteger.valueOf(Long.MIN_VALUE));
    testThrow(BigInteger.valueOf(Long.MIN_VALUE + 1));
    testThrow(BigInteger.valueOf(Long.MIN_VALUE / 2));
    testThrow(BigInteger.valueOf((Long.MIN_VALUE / 2) + 1));
    testThrow(BigInteger.valueOf((Long.MIN_VALUE / 2) - 1));
  }


  private void test(String answerFunc, Integer n) {
    String inStr = "4" + System.lineSeparator() + BigInteger.valueOf(n) + System.lineSeparator();
    String answerMain = "Choose a task number(1-5) or another number to exit: " + System.lineSeparator()
            + "Enter n to find n-Fibonacci:" + System.lineSeparator() + answerFunc;

    MainTestService.testOutMain(inStr, answerMain);

    //old check
    assertEquals(answerFunc, FibonacciFinder.getFibonacci(BigInteger.valueOf(n)).toString());
  }

  private void testThrow(BigInteger n) {
    String inStr = "4" + System.lineSeparator() + n + System.lineSeparator();

    MainTestService.testErrMain(inStr, "Expected n >= 0. Got: n = " + n + System.lineSeparator());


    //old check
    try {
      FibonacciFinder.getFibonacci(n);
      fail();
    } catch (IllegalArgumentException e) {
      // There should be nothing here.
    }
  }
}
